{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport CheckBox from \"react-native-web/dist/exports/CheckBox\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport * as Notifications from 'expo-notifications';\nimport * as Permissions from 'expo-notifications';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ReminderScreen() {\n  var _useState = useState(new Date()),\n    _useState2 = _slicedToArray(_useState, 2),\n    reminderTime = _useState2[0],\n    setReminderTime = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    selectedDays = _useState4[0],\n    setSelectedDays = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    showTimePicker = _useState6[0],\n    setShowTimePicker = _useState6[1];\n  function registerForPushNotificationsAsync() {\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  function _registerForPushNotificationsAsync() {\n    _registerForPushNotificationsAsync = _asyncToGenerator(function* () {\n      if (Platform.OS === 'android') {\n        yield Notifications.setNotificationChannelAsync('default', {\n          name: 'default',\n          importance: Notifications.AndroidImportance.MAX,\n          vibrationPattern: [0, 250, 250, 250],\n          lightColor: '#FF231F7C'\n        });\n      }\n      var _yield$Permissions$ge = yield Permissions.getPermissionsAsync(Permissions.NOTIFICATIONS),\n        status = _yield$Permissions$ge.status;\n      if (status !== 'granted') {\n        var _yield$Permissions$re = yield Permissions.requestPermissionsAsync(Permissions.NOTIFICATIONS),\n          newStatus = _yield$Permissions$re.status;\n        if (newStatus !== 'granted') {\n          alert('Failed to get push token for push notification!');\n          return;\n        }\n      }\n      var token = (yield Notifications.getExpoPushTokenAsync()).data;\n      console.log(token);\n      return token;\n    });\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  function schedulePushNotification() {\n    return _schedulePushNotification.apply(this, arguments);\n  }\n  function _schedulePushNotification() {\n    _schedulePushNotification = _asyncToGenerator(function* () {\n      if (!reminderTime || !selectedDays.length) return;\n      for (var day of selectedDays) {\n        var reminderDate = new Date();\n        reminderDate.setHours(reminderTime.getHours());\n        reminderDate.setMinutes(reminderTime.getMinutes());\n        reminderDate.setSeconds(0);\n        var dayOffset = (day - reminderDate.getDay() + 7) % 7;\n        reminderDate.setDate(reminderDate.getDate() + dayOffset);\n        yield Notifications.scheduleNotificationAsync({\n          content: {\n            title: \"Time for Meditation! ðŸ§˜â€â™‚ï¸\",\n            body: 'Start your daily meditation now!'\n          },\n          trigger: {\n            year: reminderDate.getFullYear(),\n            month: reminderDate.getMonth() + 1,\n            day: reminderDate.getDate(),\n            hour: reminderDate.getHours(),\n            minute: reminderDate.getMinutes(),\n            repeats: true\n          }\n        });\n      }\n    });\n    return _schedulePushNotification.apply(this, arguments);\n  }\n  var toggleDay = function toggleDay(day) {\n    setSelectedDays(function (prevState) {\n      return prevState.includes(day) ? prevState.filter(function (d) {\n        return d !== day;\n      }) : [].concat(_toConsumableArray(prevState), [day]);\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      children: \"Select Time for Reminder:\"\n    }), _jsx(Button, {\n      title: \"Select Time\",\n      onPress: function onPress() {\n        return setShowTimePicker(!showTimePicker);\n      }\n    }), showTimePicker && _jsx(TextInput, {\n      style: styles.timeInput,\n      value: reminderTime.toTimeString().substr(0, 5),\n      onChangeText: function onChangeText(text) {\n        var _text$split$map = text.split(':').map(Number),\n          _text$split$map2 = _slicedToArray(_text$split$map, 2),\n          hours = _text$split$map2[0],\n          minutes = _text$split$map2[1];\n        setReminderTime(new Date(reminderTime.setHours(hours, minutes)));\n      },\n      keyboardType: \"numeric\"\n    }), _jsx(Text, {\n      children: \"Select Days of the Week:\"\n    }), _jsx(View, {\n      style: styles.dayContainer,\n      children: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'].map(function (day, index) {\n        return _jsxs(View, {\n          style: styles.dayRow,\n          children: [_jsx(CheckBox, {\n            value: selectedDays.includes(index),\n            onValueChange: function onValueChange() {\n              return toggleDay(index);\n            }\n          }), _jsx(Text, {\n            children: day\n          })]\n        }, index);\n      })\n    }), _jsx(Button, {\n      title: \"Schedule Reminder\",\n      onPress: schedulePushNotification\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  timeInput: {\n    height: 40,\n    borderColor: 'gray',\n    borderWidth: 1,\n    marginTop: 10,\n    width: '80%',\n    textAlign: 'center'\n  },\n  dayContainer: {\n    marginTop: 20\n  },\n  dayRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 5\n  }\n});","map":{"version":3,"names":["React","useState","Button","Platform","View","Text","StyleSheet","CheckBox","TextInput","Notifications","Permissions","jsx","_jsx","jsxs","_jsxs","ReminderScreen","_useState","Date","_useState2","_slicedToArray","reminderTime","setReminderTime","_useState3","_useState4","selectedDays","setSelectedDays","_useState5","_useState6","showTimePicker","setShowTimePicker","registerForPushNotificationsAsync","_registerForPushNotificationsAsync","apply","arguments","_asyncToGenerator","OS","setNotificationChannelAsync","name","importance","AndroidImportance","MAX","vibrationPattern","lightColor","_yield$Permissions$ge","getPermissionsAsync","NOTIFICATIONS","status","_yield$Permissions$re","requestPermissionsAsync","newStatus","alert","token","getExpoPushTokenAsync","data","console","log","schedulePushNotification","_schedulePushNotification","length","day","reminderDate","setHours","getHours","setMinutes","getMinutes","setSeconds","dayOffset","getDay","setDate","getDate","scheduleNotificationAsync","content","title","body","trigger","year","getFullYear","month","getMonth","hour","minute","repeats","toggleDay","prevState","includes","filter","d","concat","_toConsumableArray","style","styles","container","children","onPress","timeInput","value","toTimeString","substr","onChangeText","text","_text$split$map","split","map","Number","_text$split$map2","hours","minutes","keyboardType","dayContainer","index","dayRow","onValueChange","create","flex","justifyContent","alignItems","padding","height","borderColor","borderWidth","marginTop","width","textAlign","flexDirection","marginVertical"],"sources":["D:/practice/projects/meditationApp/meditationApp/homework-4-nisheshacharya/homework4/screens/ReminderScreen.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, Platform, View, Text, StyleSheet, CheckBox, TextInput } from 'react-native';\r\nimport * as Notifications from 'expo-notifications';\r\nimport * as Permissions from 'expo-notifications';  // Updated import for permissions\r\n\r\nexport default function ReminderScreen() {\r\n  const [reminderTime, setReminderTime] = useState(new Date());\r\n  const [selectedDays, setSelectedDays] = useState([]);\r\n  const [showTimePicker, setShowTimePicker] = useState(false);\r\n\r\n  async function registerForPushNotificationsAsync() {\r\n    if (Platform.OS === 'android') {\r\n      await Notifications.setNotificationChannelAsync('default', {\r\n        name: 'default',\r\n        importance: Notifications.AndroidImportance.MAX,\r\n        vibrationPattern: [0, 250, 250, 250],\r\n        lightColor: '#FF231F7C',\r\n      });\r\n    }\r\n\r\n    const { status } = await Permissions.getPermissionsAsync(Permissions.NOTIFICATIONS);\r\n    if (status !== 'granted') {\r\n      const { status: newStatus } = await Permissions.requestPermissionsAsync(Permissions.NOTIFICATIONS);\r\n      if (newStatus !== 'granted') {\r\n        alert('Failed to get push token for push notification!');\r\n        return;\r\n      }\r\n    }\r\n    \r\n    const token = (await Notifications.getExpoPushTokenAsync()).data;\r\n    console.log(token);\r\n    return token;\r\n  }\r\n\r\n  async function schedulePushNotification() {\r\n    if (!reminderTime || !selectedDays.length) return;\r\n\r\n    for (const day of selectedDays) {\r\n      const reminderDate = new Date();\r\n      reminderDate.setHours(reminderTime.getHours());\r\n      reminderDate.setMinutes(reminderTime.getMinutes());\r\n      reminderDate.setSeconds(0);\r\n\r\n      const dayOffset = (day - reminderDate.getDay() + 7) % 7;\r\n      reminderDate.setDate(reminderDate.getDate() + dayOffset);\r\n\r\n      await Notifications.scheduleNotificationAsync({\r\n        content: {\r\n          title: \"Time for Meditation! ðŸ§˜â€â™‚ï¸\",\r\n          body: 'Start your daily meditation now!',\r\n        },\r\n        trigger: {\r\n          year: reminderDate.getFullYear(),\r\n          month: reminderDate.getMonth() + 1,\r\n          day: reminderDate.getDate(),\r\n          hour: reminderDate.getHours(),\r\n          minute: reminderDate.getMinutes(),\r\n          repeats: true,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  const toggleDay = (day) => {\r\n    setSelectedDays(prevState =>\r\n      prevState.includes(day) ? prevState.filter(d => d !== day) : [...prevState, day]\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text>Select Time for Reminder:</Text>\r\n      <Button title=\"Select Time\" onPress={() => setShowTimePicker(!showTimePicker)} />\r\n      {showTimePicker && (\r\n        <TextInput\r\n          style={styles.timeInput}\r\n          value={reminderTime.toTimeString().substr(0, 5)}\r\n          onChangeText={(text) => {\r\n            const [hours, minutes] = text.split(':').map(Number);\r\n            setReminderTime(new Date(reminderTime.setHours(hours, minutes)));\r\n          }}\r\n          keyboardType=\"numeric\"\r\n        />\r\n      )}\r\n\r\n      <Text>Select Days of the Week:</Text>\r\n      <View style={styles.dayContainer}>\r\n        {['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'].map((day, index) => (\r\n          <View key={index} style={styles.dayRow}>\r\n            <CheckBox\r\n              value={selectedDays.includes(index)}\r\n              onValueChange={() => toggleDay(index)}\r\n            />\r\n            <Text>{day}</Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n\r\n      <Button\r\n        title=\"Schedule Reminder\"\r\n        onPress={schedulePushNotification}\r\n      />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 20,\r\n  },\r\n  timeInput: {\r\n    height: 40,\r\n    borderColor: 'gray',\r\n    borderWidth: 1,\r\n    marginTop: 10,\r\n    width: '80%',\r\n    textAlign: 'center',\r\n  },\r\n  dayContainer: {\r\n    marginTop: 20,\r\n  },\r\n  dayRow: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginVertical: 5,\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}